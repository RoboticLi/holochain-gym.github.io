<!DOCTYPE html><html lang="en" dir="ltr"><head>
  
    

  



<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Concepts: Validation Rules: Holochain Gym</title>
<meta property="og:title" content="Concepts: Validation Rules: Holochain Gym">

<meta name="generator" content="rocket 0.1">
<link rel="canonical" href="/concepts/validation-rules/">



<meta name="description" content="Holochain Gym contains exercises, resources and trainings to learn holochain">
<meta property="og:description" content="Holochain Gym contains exercises, resources and trainings to learn holochain">

  
    <link rel="apple-touch-icon" sizes="180x180" href="../../assets/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../assets/favicon-16x16.png">
<link rel="manifest" href="../../assets/webmanifest.json">
<link rel="mask-icon" href="../../assets/safari-pinned-tab.svg" color="#3f93ce">
<meta name="msapplication-TileColor" content="#1d3557">
<meta name="theme-color" content="#1d3557">

  
    <meta property="og:site_name" content="Holochain Gym">
<meta property="og:type" content="website">

<meta property="og:image" content="../../9ab48c0f.png">
<meta property="og:url" content="/concepts/validation-rules/">

<meta name="twitter:card" content="summary_large_image">

  
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="">

<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&amp;display=optional" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&amp;display=optional" rel="stylesheet">

<style>
  body {
    font-family: Arial !important;
  }
</style>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
    <link rel="stylesheet" href="../../be94ee0c.css">
<link rel="stylesheet" href="../../0f4765a3.css">
<link rel="stylesheet" href="../../ac2ea3b8.css">
<link rel="stylesheet" href="../../b8c01bc2.css">

  
    <noscript><link rel="stylesheet" href="/_merged_assets/_static/noscript.css"/></noscript>

  

<link rel="preload" href="../../81b16c1a.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../962426a7.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../d15d5a5d.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../9c404788.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../2af62055.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../8ad3a711.js" as="script" crossorigin="anonymous">
</head>

  

  
  <body layout="layout-sidebar">
  

    
      <header id="main-header">
  <div class="content-area">
    
      <button id="mobile-menu-trigger" data-action="trigger-mobile-menu">
	<span class="sr-only">Show Menu</span>
	      <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon">
        <path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path>
      </svg>

</button>

    
      
	<a class="logo-link" href="/">
  <img src="../../a9d80dbb.svg" alt="A gym tool">
  <span>Holochain Gym</span>
</a>



    
      
  <a href="/concepts/" class="
          
           active 
        ">Concepts</a>
  <a href="/developers/" class="
          
          
        ">Developers</a>
  <a href="/whatsnext/" class="
          
          
        ">What's next</a>

    
      <a href="https://developer.holochain.org/docs/glossary/" class="">Glossary of Terms</a>
    
      <launch-dark-switch class="light-dark-switch" label="Toggle darkmode">Toggle darkmode</launch-dark-switch>


    
      <a href="https://forum.holochain.org/c/learning-library/gym/133" class="">Give us Feedback!</a>
    
      
	<a class="social-link" href="https://github.com/holochain-gym/" aria-label="Holochain Gym on GitHub" rel="noopener noreferrer" target="_blank">
		<span class="sr-only">GitHub</span>
		
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 16" fill="none">
  <title>GitHub</title>
  <path fill="currentColor" fill-rule="evenodd" d="M8.18391.249268C3.82241.249268.253906 3.81777.253906 8.17927c0 3.46933 2.279874 6.44313 5.451874 7.53353.3965.0991.49563-.1983.49563-.3965v-1.3878c-2.18075.4956-2.67638-.9912-2.67638-.9912-.3965-.8922-.89212-1.1895-.89212-1.1895-.69388-.4957.09912-.4957.09912-.4957.793.0992 1.1895.793 1.1895.793.69388 1.2887 1.88338.8922 2.27988.6939.09912-.4956.29737-.8921.49562-1.0904-1.78425-.1982-3.5685-.8921-3.5685-3.96496 0-.89212.29738-1.586.793-2.08162-.09912-.19825-.3965-.99125.09913-2.08163 0 0 .69387-.19825 2.18075.793.59475-.19825 1.28862-.29737 1.9825-.29737.69387 0 1.38775.09912 1.98249.29737 1.4869-.99125 2.1808-.793 2.1808-.793.3965 1.09038.1982 1.88338.0991 2.08163.4956.59475.793 1.28862.793 2.08162 0 3.07286-1.8834 3.66766-3.66764 3.86586.29737.3965.59474.8921.59474 1.586v2.1808c0 .1982.0991.4956.5948.3965 3.172-1.0904 5.4518-4.0642 5.4518-7.53353-.0991-4.3615-3.6676-7.930002-8.02909-7.930002z" clip-rule="evenodd"></path>
</svg>

		
	</a>

    
  </div>
</header>

    

    
  <div id="content-wrapper">
    <div class="content-area">
      
        <rocket-drawer id="sidebar">
  <nav slot="content" id="sidebar-nav">
    
      <a class="logo-link" href="/">
  <img src="../../a9d80dbb.svg" alt="A gym tool">
  <span>Holochain Gym</span>
</a>


    
      <rocket-navigation>
  <ul><li class="menu-item active">
<a href="/concepts/concepts/">Concepts</a>
<ul><li class="menu-item">
<a href="/concepts/dht/">DHT</a>

</li>
<li class="menu-item">
<a href="/concepts/source-chain/">Source Chain</a>

</li>
<li class="menu-item">
<a href="/concepts/entry-graph/">Entry Graph</a>

</li>
<li class="menu-item">
<a href="/concepts/dna-zomes/">Dna and Zomes</a>

</li>
<li class="menu-item current">
<a href="/concepts/validation-rules/">Validation Rules</a>
<ul>
  <li class="menu-item anchor">
    <a href="#the-immune-system" class="anchor">The Immune System</a>
  </li>
  <li class="menu-item anchor">
    <a href="#but-what-happens-with-51-of-malicious-nodes" class="anchor">But what happens with 51% of malicious nodes?</a>
  </li>
</ul>

</li>
<li class="menu-item">
<a href="/concepts/membranes-happs/">Membranes and hApps</a>

</li></ul>
</li></ul>
  <div class="sidebar-bottom">
  <hr> <launch-dark-switch class="light-dark-switch" label="Toggle darkmode">Toggle darkmode</launch-dark-switch>

  
    <a href="https://github.com/holochain-gym/">Help and Feedback</a>
  
</div>

</rocket-navigation>

    
  </nav>
</rocket-drawer>

      
      
        <main class="markdown-body">
  
    <h1 id="concepts-validation-rules"><a class="anchor" href="#concepts-validation-rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Concepts: Validation Rules</h1>
<p><strong>TLDR: the most important part of a DNA is the Validation Rules (rules of the game), which determine which actions are valid and which aren't. If someone tries to break them, an immune response is triggered.</strong></p>
<inline-notification type="tip" title="Useful reads">
<ul>
<li><a href="https://developer.holochain.org/concepts/7_validation/">Core Concepts: Validation Rules</a></li>
<li><a href="https://en.wikipedia.org/wiki/Deterministic_algorithm">Deterministic algorithms</a></li>
</ul>
</inline-notification>
<h1 id="validation-rules"><a class="anchor" href="#validation-rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Validation Rules</h1>
<p><code>Validation Rules</code> are probably the most important mechanism in Holochain. They are encoded in the <code>DNA</code>, and define <strong>what is valid and what is not valid in the context of it</strong>.</p>
<p>You can think of it this way: if we all agree that we are playing soccer, then when someone touches the ball with their hand, we all know that that's invalid in the context of this game. But if we are playing basketball, that's obviously allowed.</p>
<p><strong>Validation Rules need to be deterministic</strong>. In short this means that they need to give back the same result (valid or invalid) for any given element, no matter when they are run, by whom, or in which circumstances.</p>
<h2 id="the-immune-system"><a class="anchor" href="#the-immune-system"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The Immune System</h2>
<p>But! What happens if someone breaks the rules? How does Holochain maintain data integrity if some malicious agent publishes bad data to the network?</p>
<h3 id="try-it"><a class="anchor" href="#try-it"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Try it!</h3>
<p>Here you can see a network of 10 agents with 1 malicious node (marked with 😈).</p>
<p>In this <code>DNA</code> there is only one validation rule: <strong>anyone can create posts, but only the author can update their own posts</strong>.</p>
<p>In this scenario our malicious agent will try to update a post created by another agent, which is not allowed. Let's see what happens when you click "Run".</p>
<blockquote>
<p>You can refresh the page and run it as many times as you want, and you can also enable the "Step by Step" mode to have a closer look.</p>
</blockquote>
<mdjs-story mdjs-story-name="Simple1"></mdjs-story>
<p>So! If you look closely, all the connections between the malicious agents and the other nodes have been closed. Effectively the malicious agent has been booted out of the network, and the other agents won't talk to it again.</p>
<p>Here is a brief description of what has happened:</p>
<ol>
<li>The malicious agent was able to update its own chain without any problems (after all, they control the code that is running on their computer).</li>
<li>Then they published the update to the DHT, to random nodes that are called "validators".</li>
<li>When the validators received that publication, before accepting it they have run the validation rules for our DNA.</li>
<li>In this case the update was not valid, and since we all agreed to play by the same rules just by being present in this DNA, we know that the malicious agent has cheated.</li>
<li>We then proceed to sound the alarm, creating warrants for everyone in the network to make sure they know about the cheating.</li>
<li>The nodes that receive those warrants run the validation rules themselves to know for sure, and close any connection they had with the cheating agent and emit new warrants.</li>
</ol>
<h2 id="but-what-happens-with-51-of-malicious-nodes"><a class="anchor" href="#but-what-happens-with-51-of-malicious-nodes"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>But what happens with 51% of malicious nodes?</h2>
<p>But that surely cannot sustain a 51% attack... can it?</p>
<p>In this other scenario, we have a network of 10 nodes, with only 4 of them being honest nodes. This network has the same rules as the last one: one agent cannot update another agent's post.</p>
<p>When you run this scenario, one of the malicious agents is going to update a post from another agent. What the other malicious agents will do is pretend that that action was valid, trying to convince the honest nodes that the update was valid in reality.</p>
<p>Try for yourself: click "Run" and see what happens.</p>
<mdjs-story mdjs-story-name="Simple2"></mdjs-story>
<p>The honest nodes have been able to separate themselves into their own network, effectively excluding the other ones from participating.</p>
<p>How did the honest nodes know who was cheating? Every time an agent validates an element, they compare the result of their own validation with the validation done by other agents. If the results are different, that must mean that the other validator is trying to cheat as well (because remember, validation rules are deterministic!), so we close the connection as well.</p>
<p>Keep in mind that this representation and scenario are a bit simplistic in favor of clarity: in reality, you will have different options on what to do about cheating agents, and how your <code>DNA</code> wants to react to different offenses in the network.</p>
        
      

  
    <div class="content-footer">
  <p>
    Caught a mistake or want to contribute to the documentation?
    <a href="https://github.com/holochain-gym/holochain-gym.github.io/edit/main/./docs/concepts/validation-rules.md">Edit this page on GitHub!</a>
  </p>
</div>

  
</main>

      
    </div>
  </div>


    
      <footer id="main-footer">
  
    

  
    <div id="footer-menu">
  <div class="content-area">
    
      <nav>
        <h3>Holochain</h3>
        <ul>
          
            <li>
              <a href="https://developer.holochain.org/docs/references/">Documentation</a>
            </li>
          
            <li>
              <a href="https://forum.holochain.org">Forum</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>Gym</h3>
        <ul>
          
            <li>
              <a href="https://forum.holochain.org/c/learning-library/gym/133">Help and Feedback</a>
            </li>
          
            <li>
              <a href="https://github.com/holochain-gym/holochain-gym.github.io/issues">Tasks for Contributors to the Gym</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>Discover</h3>
        <ul>
          
            <li>
              <a href="https://holochain-open-dev.github.io/blog">Holochain Open Dev Blog</a>
            </li>
          
            <li>
              <a href="https://github.com/holochain-open-dev">Open Source Modules</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>License</h3>
        <ul>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">This work is licensed under</a>
            </li>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">a Creative 
Commons Attribution 4.0</a>
            </li>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">International License</a>
            </li>
          
        </ul>
      </nav>
    
  </div>
</div>

  
</footer>

    

    
  


  

<script>
  window.__rocketServiceWorkerUrl = '/service-worker.js';
</script>






  



  


<script type="module" src="../../81b16c1a.js"></script>
<script type="module" src="../../d15d5a5d.js" inject-service-worker=""></script>
<script type="module" src="../../9c404788.js" mdjs-setup=""></script>

</body></html>